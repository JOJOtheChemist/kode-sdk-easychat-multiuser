import{R as a,p as e,w as g}from"./chunk-NISHYRIK-CKdEls7F.js";function w({messages:t,isBotThinking:s}){const r=a.useRef(null);return a.useEffect(()=>{const n=r.current;n&&n.scrollTo({top:n.scrollHeight,behavior:"smooth"})},[t,s]),e.jsx("div",{className:"flex-1 overflow-hidden rounded-lg border border-base-300 bg-base",children:e.jsxs("div",{ref:r,className:"custom-scrollbar-always h-full space-y-4 overflow-y-auto px-4 py-6",children:[t.map(n=>e.jsx(j,{message:n},n.id)),s&&e.jsx(v,{})]})})}function j({message:t}){const s=t.author==="user";return e.jsx("div",{className:`flex ${s?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:["rounded-2xl px-4 py-3 text-sm leading-relaxed shadow-sm",s?"bg-primary text-primary-content":"bg-base-200 text-base-content"].join(" "),children:[e.jsx("p",{className:"whitespace-pre-wrap",children:t.content}),e.jsx("span",{className:"mt-2 block text-xs opacity-60",children:new Date(t.timestamp).toLocaleTimeString()})]})})}function v(){return e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl bg-base-200 px-4 py-3 text-sm text-base-content/80 shadow-sm",children:[e.jsx("span",{className:"inline-flex h-2 w-2 animate-bounce rounded-full bg-base-content/60"}),e.jsx("span",{className:"inline-flex h-2 w-2 animate-bounce rounded-full bg-base-content/60 [animation-delay:120ms]"}),e.jsx("span",{className:"inline-flex h-2 w-2 animate-bounce rounded-full bg-base-content/60 [animation-delay:240ms]"}),e.jsx("span",{children:"助手正在思考…"})]})})}function y({value:t,disabled:s,onChange:r,onSubmit:n}){const c=i=>{i.preventDefault(),n(t)};return e.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3 rounded-lg border border-base-300 bg-base p-4 shadow-sm",children:[e.jsx("label",{className:"text-sm font-medium text-base-content/70",children:"输入消息（已为你填入'你好'）"}),e.jsx("textarea",{value:t,onChange:i=>r(i.target.value),rows:3,className:"w-full resize-none rounded-md border border-base-300 bg-base px-3 py-2 text-sm text-base-content outline-none transition focus:border-primary focus:ring-2 focus:ring-primary/20",placeholder:"试着向助手打个招呼吧…","aria-label":"模拟会话输入框",disabled:s}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-base-content/60",children:"当前演示不会真正发送数据，仅用于观察 UI 表现。"}),e.jsx("button",{type:"submit",disabled:s,className:"inline-flex items-center gap-2 rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-content transition hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-70",children:"发送"})]})]})}function N({onReset:t}){return e.jsxs("div",{className:"flex flex-col gap-3 rounded-lg bg-base p-4 shadow-md md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-base-content/60",children:"对话界面预览"}),e.jsx("h1",{className:"text-xl font-semibold text-base-content",children:"Kode Conversation Prototype"}),e.jsx("p",{className:"text-sm text-base-content/70",children:"该页面用于快速演示新版会话界面的布局，尚未接入实时数据与 WebSocket 流程。"})]}),e.jsx("button",{type:"button",onClick:t,className:"inline-flex items-center justify-center rounded-md border border-base-300 bg-base-200 px-3 py-2 text-sm font-medium text-base-content shadow-sm transition hover:border-base-400 hover:bg-base-100",children:"重置预览"})]})}const x=()=>{const t=new Date,s={id:`assistant-${t.getTime()}`,author:"assistant",content:"欢迎来到新版会话界面预览，这里先展示静态的渲染效果。",timestamp:t.toISOString()},r={id:`assistant-${t.getTime()+1}`,author:"assistant",content:"稍后我们会把真实的数据流（REST + WebSocket）接入到同样的 UI 中。",timestamp:new Date(t.getTime()+1e3).toISOString()};return[s,r]};function S(){const[t,s]=a.useState(()=>x()),[r,n]=a.useState("你好"),[c,i]=a.useState(!1),o=a.useRef(void 0),b=()=>{o.current&&(window.clearTimeout(o.current),o.current=void 0),s(x()),n("你好"),i(!1)},d=a.useCallback(m=>{s(l=>[...l,m])},[]),p=a.useCallback(m=>{const l=m.trim();if(!l)return;const u=new Date,f={id:`user-${u.getTime()}`,author:"user",content:l,timestamp:u.toISOString()};d(f),n(""),i(!0),o.current=window.setTimeout(()=>{const h={id:`assistant-${Date.now()}`,author:"assistant",content:`收到「${l}」。后续接入逻辑后，这里会展示真实响应。`,timestamp:new Date().toISOString()};d(h),i(!1),o.current=void 0},450)},[d]);return a.useEffect(()=>()=>{o.current&&(window.clearTimeout(o.current),o.current=void 0)},[]),e.jsx("div",{className:"flex h-full flex-col bg-base-200 md:bg-transparent",children:e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:p-6",children:[e.jsx(N,{onReset:b}),e.jsxs("div",{className:"flex min-h-0 flex-1 flex-col gap-4",children:[e.jsx(w,{messages:t,isBotThinking:c}),e.jsx(y,{value:r,onChange:n,onSubmit:p,disabled:c})]})]})})}const R=g(function(){return e.jsx(S,{})});export{R as default};
