import{R as o,p as t}from"./chunk-NISHYRIK-CKdEls7F.js";import{j}from"./index-BDUzCKOA.js";import{b as v,a6 as b,a7 as w,a8 as R}from"./parse-pr-url-DDbpIt54.js";import{a as S}from"./use-config-DZPclKuv.js";import{a as A}from"./open-hands-axios-BIuoB8bl.js";import{C as N}from"./git-provider-icon-Db_Bl_5f.js";import{u as E}from"./conversation-WQiCKy8A.js";import{I as d}from"./declaration-B9eIPmUJ.js";import{S as g}from"./server-process-B00scO5q.js";import{u as I}from"./useTranslation-DONB_giz.js";import"./module-CWLbpm_7.js";import"./index-DWiKAxKp.js";import"./query-client-config-Dd99l1aU.js";import"./i18next-Lgj2Bm8L.js";import"./retrieve-axios-error-message-CYr77e_f.js";import"./custom-toast-handlers-fYPNAJaC.js";import"./option-service.api-CTPg1Fmy.js";import"./infiniteQueryBehavior-D7Qz1qlw.js";import"./use-user-providers-P0hmd5MI.js";import"./use-settings-B2QUSrrJ.js";import"./use-is-authed-Dg_tgDAm.js";import"./utils-BVnsmU2z.js";import"./bundle-mjs-0JNfDbnS.js";import"./close-bbjPMB7Q.js";import"./chunk-MSDKUXDP-Cfu5rKGn.js";import"./chunk-TX3FPB7D-DZsJI2yo.js";import"./brand-button-BQs8JWFf.js";import"./index-S5BalIfI.js";import"./tooltip-button-DdCqtqn-.js";import"./preload-helper-BXl3LOEh.js";import"./index-JAudiiL9.js";import"./index-CX-90vHk.js";import"./constants-DE11vt2u.js";import"./typography-dnvkoiv9.js";import"./repo-forked-BC1XV35P.js";import"./modal-backdrop-cp3dlfku.js";import"./modal-body-BthUSAn0.js";import"./base-modal-DLway4p0.js";import"./index-at5IPRPS.js";import"./Trans-CPaTqF-h.js";import"./settings-dropdown-input-CJWg5DfQ.js";import"./optional-tag-SXD2PjYq.js";import"./useSingleSelectListState-Dp1i9X5O.js";import"./loading-spinner-C-wnmolE.js";const D=()=>{const[a,i]=o.useState(null),{conversationId:s}=v(),n=E(),{data:m}=S({queryKey:[s,"hosts"],queryFn:async()=>({hosts:await N.getWebHosts(s)}),enabled:n&&!!s,initialData:{hosts:[]},meta:{disableToast:!0}}),l=b({queries:m.hosts.map(e=>({queryKey:[s,"hosts",e],queryFn:async()=>{try{return await A.get(e),e}catch{return""}},refetchInterval:3e3,meta:{disableToast:!0}}))}).map(e=>e.data);return o.useEffect(()=>{const e=l.find(r=>r);i(e||"")},[l]),{activeHost:a}};function H({ref:a,onBlur:i,defaultValue:s}){return t.jsx("form",{ref:a,onSubmit:n=>n.preventDefault(),className:"flex-1",children:t.jsx("input",{name:"url",type:"text",defaultValue:s,className:"w-full bg-transparent",onBlur:i})})}function wt(){const{t:a}=I(),{activeHost:i}=D(),[s,n]=o.useState(0),[m,c]=o.useState(null),[l,e]=o.useState("hello"),r=o.useRef(null),y=()=>{if(r.current){const h=new FormData(r.current).get("url")?.toString();if(h){const x=new URL(h);c(x.origin),e(x.pathname)}}},p=()=>{c(i),e(""),r.current&&r.current.reset()};o.useEffect(()=>{p()},[i]);const u=`${m}/${l}`;return m?t.jsxs("div",{className:"h-full w-full",children:[t.jsxs("div",{className:"w-full p-2 flex items-center gap-4 border-b border-neutral-600",children:[t.jsx("button",{type:"button",onClick:()=>window.open(u,"_blank"),className:"text-sm",children:t.jsx(w,{className:"w-4 h-4"})}),t.jsx("button",{type:"button",onClick:()=>n(f=>f+1),className:"text-sm",children:t.jsx(j,{className:"w-4 h-4"})}),t.jsx("button",{type:"button",onClick:()=>p(),className:"text-sm",children:t.jsx(R,{className:"w-4 h-4"})}),t.jsx("div",{className:"w-full flex",children:t.jsx(H,{ref:r,onBlur:y,defaultValue:u})})]}),t.jsx("iframe",{title:a(d.SERVED_APP$TITLE),src:u,className:"w-full h-full custom-scrollbar-always"},s)]}):t.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full p-10",children:[t.jsx(g,{width:113,height:113,color:"#A1A1A1"}),t.jsx("span",{className:"text-[#8D95A9] text-[19px] font-normal leading-5",children:a(d.BROWSER$SERVER_MESSAGE)})]})}export{wt as default};
