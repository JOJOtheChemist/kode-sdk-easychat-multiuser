import{u as o,b as i,a as n}from"./use-config-DZPclKuv.js";import{o as e,a as u}from"./open-hands-axios-BIuoB8bl.js";class c{static async authenticate(t){return t==="oss"||await e.post("/api/authenticate"),!0}static async getGitHubAccessToken(t){const{data:a}=await e.post("/api/keycloak/callback",{code:t});return a}static async logout(t){const a=t==="saas"?"/api/logout":"/api/unset-provider-tokens";await e.post(a)}}const d=()=>{const{data:r}=o(),t=i(),a=r?.APP_MODE;return n({queryKey:["user","authenticated",a],queryFn:async()=>{try{return await c.authenticate(a),!0}catch(s){if(u.isAxiosError(s)&&s.response?.status===401)return!1;throw s}},enabled:!!a&&!t,staleTime:1e3*60*5,gcTime:1e3*60*15,retry:!1,meta:{disableToast:!0}})};export{c as A,d as u};
