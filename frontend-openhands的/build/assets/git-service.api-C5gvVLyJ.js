import{o as r}from"./open-hands-axios-BIuoB8bl.js";import{C as c}from"./git-provider-icon-Db_Bl_5f.js";const l=g=>{const e=/<[^>]*[?&]page=(\d+)(?:&[^>]*)?>; rel="next"/,t=g.match(e);return t?parseInt(t[1],10):null};class m{static async searchGitRepositories(e,t=100,a){return(await r.get("/api/user/search/repositories",{params:{query:e,per_page:t,selected_provider:a}})).data}static async retrieveUserGitRepositories(e,t=1,a=30){const{data:s}=await r.get("/api/user/repositories",{params:{selected_provider:e,sort:"pushed",page:t,per_page:a}}),n=s.length>0&&s[0].link_header?s[0].link_header:"",p=l(n);return{data:s,nextPage:p}}static async retrieveInstallationRepositories(e,t,a,s=1,n=30){const p=a[t],i=await r.get("/api/user/repositories",{params:{selected_provider:e,sort:"pushed",page:s,per_page:n,installation_id:p}}),h=i.data.length>0&&i.data[0].link_header?i.data[0].link_header:"",d=l(h);let o;return d?o=t:t+1<a.length?o=t+1:o=null,{data:i.data,nextPage:d,installationIndex:o}}static async getRepositoryBranches(e,t=1,a=30){const{data:s}=await r.get(`/api/user/repository/branches?repository=${encodeURIComponent(e)}&page=${t}&per_page=${a}`);return s}static async searchRepositoryBranches(e,t,a=30,s){const{data:n}=await r.get("/api/user/search/branches",{params:{repository:e,query:t,per_page:a,selected_provider:s}});return n}static async getRepositoryMicroagents(e,t){const{data:a}=await r.get(`/api/user/repository/${e}/${t}/microagents`);return a}static async getRepositoryMicroagentContent(e,t,a){const{data:s}=await r.get(`/api/user/repository/${e}/${t}/microagents/content`,{params:{file_path:a}});return s}static async getUserInstallationIds(e){const{data:t}=await r.get(`/api/user/installations?provider=${e}`);return t}static async getGitChanges(e){const t=`${c.getConversationUrl(e)}/git/changes`,{data:a}=await r.get(t,{headers:c.getConversationHeaders()});return a}static async getGitChangeDiff(e,t){const a=`${c.getConversationUrl(e)}/git/diff`,{data:s}=await r.get(a,{params:{path:t},headers:c.getConversationHeaders()});return s}}export{m as G};
