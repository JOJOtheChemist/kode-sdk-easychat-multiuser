import{u as c}from"./open-hands-axios-BIuoB8bl.js";import{u as S}from"./brand-button-BQs8JWFf.js";import{D as s}from"./module-CWLbpm_7.js";import{u as i,D as a,S as u}from"./use-settings-B2QUSrrJ.js";const N=async _=>{const r={llm_model:_.LLM_MODEL,llm_base_url:_.LLM_BASE_URL,agent:_.AGENT||a.AGENT,language:_.LANGUAGE||a.LANGUAGE,confirmation_mode:_.CONFIRMATION_MODE,security_analyzer:_.SECURITY_ANALYZER,llm_api_key:_.llm_api_key===""?"":_.llm_api_key?.trim()||void 0,remote_runtime_resource_factor:_.REMOTE_RUNTIME_RESOURCE_FACTOR,enable_default_condenser:_.ENABLE_DEFAULT_CONDENSER,condenser_max_size:_.CONDENSER_MAX_SIZE??a.CONDENSER_MAX_SIZE,enable_sound_notifications:_.ENABLE_SOUND_NOTIFICATIONS,user_consents_to_analytics:_.user_consents_to_analytics,provider_tokens_set:_.PROVIDER_TOKENS_SET,mcp_config:_.MCP_CONFIG,enable_proactive_conversation_starters:_.ENABLE_PROACTIVE_CONVERSATION_STARTERS,enable_solvability_analysis:_.ENABLE_SOLVABILITY_ANALYSIS,search_api_key:_.SEARCH_API_KEY?.trim()||"",max_budget_per_task:_.MAX_BUDGET_PER_TASK,git_user_name:_.GIT_USER_NAME?.trim()||a.GIT_USER_NAME,git_user_email:_.GIT_USER_EMAIL?.trim()||a.GIT_USER_EMAIL};await u.saveSettings(r)},I=()=>{const _=c(),{data:r}=i();return S({mutationFn:async e=>{const o={...r,...e};if(e.MCP_CONFIG&&r?.MCP_CONFIG!==e.MCP_CONFIG){const E=!!e.MCP_CONFIG,n=e.MCP_CONFIG?.sse_servers?.length||0,t=e.MCP_CONFIG?.stdio_servers?.length||0;s.capture("mcp_config_updated",{has_mcp_config:E,sse_servers_count:n,stdio_servers_count:t})}await N(o)},onSuccess:async()=>{await _.invalidateQueries({queryKey:["settings"]})},meta:{disableToast:!0}})};export{I as u};
