## 目录整体结构

- `frontend/src/root.tsx`：定义 `Layout` 外壳、引入全局样式并挂载 `<Outlet />` 用于渲染具体页面。
- `frontend/src/entry.client.tsx`：浏览器端入口，负责 React Hydration、React Query 容器以及 PostHog 初始化。
- `frontend/src/routes.ts`：集中声明所有路由与嵌套路由，使用 React Router v7 风格的配置式写法。
- `frontend/src/routes/*`：每个文件对应一个页面组件，例如首页 `home.tsx`、会话页 `conversation.tsx`、设置页等。

## 模块分类

| 目录 | 作用 |
| ---- | ---- |
| `api/` | 所有 REST/HTTP 调用的封装，`open-hands-axios.ts` 定义 axios 实例，子目录按业务拆分（会话、选项、账单等）。 |
| `components/` | UI 组件集合：`features` 是按业务功能拆分的页面级组件；`shared` 存放可复用的通用组件；`ui` 存放一些基础 UI 元素。 |
| `constants/` | 全局常量，如枚举、配置键名。 |
| `context/` & `contexts/` | React Context 提供器，例如 WebSocket 客户端、滚动上下文等。 |
| `hooks/` | React 自定义 Hook，包括 `hooks/query/*`（React Query 数据层）、`hooks/mutation/*`、以及业务逻辑类 Hook。 |
| `services/` | 更贴近业务的前端服务层，封装复杂流程（聊天事件拼装、终端数据处理等）。 |
| `state/` & `stores/` | 基于 Zustand 的全局状态管理。`state` 里是旧命名，`stores` 是逐步迁移的新拆分。 |
| `types/` | TypeScript 类型定义，涵盖后端返回结构、事件模型等。 |
| `utils/` | 工具函数与通用逻辑，例如 toast、本地存储封装、路径处理、事件转换等。 |
| `wrapper/` | 页面级通用包装器，目前用于统一处理 WebSocket 事件。 |

## 样式与资源

- `tailwind.css` / `index.css`：Tailwind 预设和全局覆盖样式。
- `assets/`：静态资源。
- `icons/`：SVG 图标组件。

## 运行期关键流程

1. 浏览器加载 `entry.client.tsx`，准备 Mock Service Worker（开发模式）并启动 React Hydration。
2. `Layout` 加载后通过 React Router 渲染各个页面。
3. 页面根据 `hooks/query` 拉取数据，并通过 `services`/`stores` 协调 WebSocket、Zustand 状态与 UI。

## 学习建议

1. 先熟悉 `routes` 和各个页面组件，搞清楚导航结构。
2. 重点阅读会话相关模块：`routes/conversation.tsx`、`context/ws-client-provider.tsx`、`components/features/chat/*`。
3. 辅以 `api/` 和 `hooks/query` 理解数据从接口到 UI 的流转。

